<%= link_to 'New transaction', new_transaction_path %>

<% if @transactions.length > 0%>
  <table class="table">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Member</th>
        <th scope="col">Book</th>
        <th scope="col" colspan="3">Options</th>
      </tr>
    </thead>

    <tbody>
      <% @transactions.each do |transaction| %>
        <tr>
          <td scope="row"><%= transaction.id %></td>
          <td><%= transaction.member.name %></td>
          <td><%= transaction.book.title %></td>
          
          <% if can? :read, transaction %>
            <td><%= link_to 'Show', transaction_path(transaction) %></td>
          <% end %>

          <% if can? :update, transaction %>
            <td><%= link_to 'Edit', edit_transaction_path(transaction) %></td>
          <% end %>

          <% if can? :destroy, transaction %>
            <td>
              <%= link_to 'Destroy', transaction_path(transaction),
                          method: :delete,
                          data: { confirm: 'Are you sure?' } %>
            </td>
          <% end %>

        </tr>
      <% end %>
    </tbody>
  </table>

  <%= paginate @transactions %>
<% else %>
  No transaction
<% end %>